image::logo.png[Tracarbon logo]
image:https://github.com/fvaleye/tracarbon/actions/workflows/build.yml/badge.svg[![build, link=https://github.com/fvaleye/tracarbon/actions/workflows/build.yml]
image:https://img.shields.io/badge/docs-python-blue.svg?style=flat-square[Docs,link=https://fvaleye.github.io/tracarbon]
image:https://img.shields.io/pypi/v/tracarbon.svg?style=flat-square)[Pypi, link=https://pypi.org/project/tracarbon/]

== üìå Overview
Tracarbon is a Python library that tracks your device's power consumption and calculates your carbon emissions.

== üì¶ Where to get it

```sh
# Install Tracarbon
pip install 'tracarbon'
```

```sh
# Install one or more exporters from the list
pip install 'tracarbon[datadog]'
```

=== üîå Devices

|===
|*Device*| Description

.^| MacOS
.^| Battery energy consumption (must be plugged)
|===

== üì° Exporters

|===
|*Exporter*| *Description*

.^| Stdout
.^| Print the metrics in Stdout
.^| Datadog
.^| Publish the metrics on Datadog
|===

=== üó∫Ô∏è Locations
|===
|*Name* |*Description* | *Source*

.^| European Environment Agency
.^| European Emission co2g/kwh for all countries
.^| https://github.com/fvaleye/tracarbon/blob/main/tracarbon/locations/data/co2-emission-intensity-9.exhibit.json[co2-emission-intensity] file from the https://www.eea.europa.eu/data-and-maps/daviz/co2-emission-intensity-9#tab-googlechartid_googlechartid_googlechartid_googlechartid_chart_11111[website]
.^| France
.^| RTE energy consumption API in real-time
.^| https://opendata.reseaux-energies.fr[RTE API]
|===

== üîé Usage

*API*
```python
import asyncio

from tracarbon import CarbonEmission, EnergyConsumption, Country
from tracarbon.exporters import Metric, StdoutExporter
from tracarbon.hardwares import HardwareInfo

exporter = StdoutExporter()
metrics = list()
location = asyncio.run(Country.get_location())
energy_consumption = EnergyConsumption.from_platform()
platform = HardwareInfo.get_platform()
metrics.append(
    Metric(
        name="energy_consumption",
        value=energy_consumption.run,
        tags=[f"platform:{platform}", f"location:{location}"]
    )
)
metrics.append(
    Metric(
        name="co2_emission",
        value=CarbonEmission(energy_consumption=energy_consumption, location=location).run,
        tags=[f"platform:{platform}", f"location:{location}"]
    )
)
metrics.append(
    Metric(
        name="hardware_cpu_usage",
        value=HardwareInfo().get_cpu_usage,
        tags=[f"platform:{platform}", f"location:{location}"]
    )
)
metrics.append(
    Metric(
        name="hardware_memory_usage",
        value=HardwareInfo().get_memory_usage,
        tags=[f"platform:{platform}", f"location:{location}"]
    )
)
asyncio.run(exporter.launch_all(metrics=metrics))
```

*CLI*
```sh
tracarbon run Stdout
```

== üõ°Ô∏è Licence
https://raw.githubusercontent.com/fvaleye/tracarbon/main/LICENSE.txt[Apache License 2.0]

== üìö Documentation
The documentation is hosted here: https://fvaleye.github.io/tracarbon/
